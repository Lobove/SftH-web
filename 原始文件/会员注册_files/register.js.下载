jQuery(document).ready(function($) {
    // 深圳前海全棉时代电子商务有限公司 --> 深圳全棉时代科技有限公司
    var $copy1 = $('.footcoryright').find('p').eq(1);
    var $copy2 = $('.footcoryright').eq(1).find('p').eq(1);
    if($copy1.text() == '粤ICP备13084779号-2 Copyright ©2002-2016 全棉时代 版权所有') {
        $copy1.text('粤ICP备13084779号-2 Copyright ©2002-2017 深圳全棉时代科技有限公司 版权所有');
    }else if ($copy1.text() == '粤ICP备13084779号-2 Copyright ©2002-2016 深圳前海全棉时代电子商务有限公司 版权所有') {
        $copy1.text('粤ICP备13084779号-2 Copyright ©2002-2017 深圳全棉时代科技有限公司 版权所有');
    }else if($copy1.text() == '粤ICP备13084779号-2 Copyright ©2009-2017 全棉时代 版权所有') {
        $copy1.text('粤ICP备13084779号-2 Copyright ©2002-2017 深圳全棉时代科技有限公司 版权所有');
    }

    if ($copy2.text() == '粤ICP备13084779号-2 Copyright ©2002-2016 深圳前海全棉时代电子商务有限公司 版权所有') {};
    $copy2.text('粤ICP备13084779号-2 Copyright ©2002-2017 深圳全棉时代科技有限公司 版权所有');
});

var wait = 120;
function time(o) {

    if (wait == 0) {
        o.removeAttribute("disabled");
        $("#btn").css({
            "width" : "90",
            "border" : "1px white solid"
        });
        o.value = "重新获取验证码";
        $("#btn").css("cursor", "pointer");
        wait = 120;
    } else {
        $(document).ready(function() {
            $("#btn").css({
                "width" : "100",
                "height" : "25px",
                "border" : "1px white solid"
            });
        });

        o.setAttribute("disabled", true);
        o.value = "" + wait + "s后重新获取";
        wait--;
        setTimeout(function() {
            time(o);
        }, 1000);
    }
}

function time1(o, b) {
    if (wait == 0) {
        b.removeAttribute("readOnly");
        b.style.backgroundColor = "white";
        o.removeAttribute("disabled");
        $("#btn").css({
            "width" : "90",
            "border" : "1px white solid"
        });
        o.value = "重新获取验证码";
        $("#btn").css("cursor", "pointer");
        wait = 120;
    } else {
        $(document).ready(function() {
            $("#btn").css({
                "width" : "100",
                "height" : "25px",
                "border" : "1px white solid"
            });
        });

        b.setAttribute("readOnly", true);
        b.style.backgroundColor = "#adadad";
        o.setAttribute("disabled", true);
        o.value = "" + wait + "s后重新获取";
        wait--;
        setTimeout(function() {
            time1(o, b);

        }, 1000);
    }
}

function timezy(o, b) {
    if (wait == 0) {
        b.removeAttribute("readOnly");
        b.style.backgroundColor = "white";
        o.removeAttribute("disabled");
        $("#btn").css({
            "color" : "#00937f",
            "border" : "1px solid #00937f",
            "background": "#fff"
        });
        o.value = "重新获取验证码";
        $('#imageCode').value = "";
        $("#btn").css("cursor", "pointer");
        wait = 120;
    } else {
        $(document).ready(function() {
            $("#btn").css({
                "color": "#999",
                "background": "#eee"
            });
        });

        b.setAttribute("readOnly", true);
        o.setAttribute("disabled", true);
        o.value = "" + wait + "s后重新获取";
        wait--;
        setTimeout(function() {
            timezy(o, b);

        }, 1000);
    }
}

function resetShopregist() {
    $("#userName").val('');
    $("#password").val('');
    $("#re_password").val('');
    // $("#emailS").val('');
}

// 加载验证码
function reload() {
    var cpt = document.getElementById('vpic');
    var src = cpt.src;
    cpt.src = src + '?' + Math.random();

}

//加载验证码
function reloadReg() {
    var cpt = document.getElementById('vpicReg');
    var src = cpt.src;
    cpt.src = src + '?' + Math.random();

}

function registerShop() {
    var sEmail = onEmailCheck();
    if (sEmail == true) {
        document.getElementById("submitShop_show").innerHTML = "<span class='button9'><b>提交中...</b></span>";
        document.getElementById("register").submit();
        return true;
    }
}

// 注册提交
function gotoRegister()
{
    var stelcode = onTelCode();
    var sTel = checkmobile();
    var vimgcode = onMsgCheck();

    //pingyou注册统计
    var _orderno = document.getElementById("telephone").value;
    juxiaoTongji(_orderno);

    if (sTel == true && vimgcode == true && stelcode == true ) 
    {
        document.getElementById("submitShop_show").innerHTML = "<span class='button9'><b>提交中...</b></span>";
        document.getElementById("register").submit();
        return true;
    }
}


//聚效注册统计 caohong
function juxiaoTongji(_orderno)
{
	var _mvq = window._mvq || []; 
    window._mvq = _mvq;
    _mvq.push(['$setAccount', 'm-141-0']);

    _mvq.push(['$setGeneral', 'registered', '', /*用户名*/ '', /*用户id*/ _orderno]);
    _mvq.push(['$logConversion']);

	(function() {
		var mvl = document.createElement('script');
		mvl.type = 'text/javascript'; mvl.async = true;
		mvl.src = ('https:' == document.location.protocol ? 'https://static-ssl.mediav.com/mvl.js' : 'http://static.mediav.com/mvl.js');
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(mvl, s); 
	})();
}

// 门店首次登陆注册，下一步
function gotoValidateTelphonef() 
{
    var sTel = validatemobile();
    var imgCode = onMsgCheck();
    var stelcode = onTelCode();
   

    if (sTel == true && imgCode == true && stelcode == true) 
    {
        document.getElementById("submitShop_show").innerHTML = "<span class='button9'><b>提交中...</b></span>";
        document.getElementById("register").submit();
        return true;
    }
}

// 图像验证码校验
function onMsgCheck() 
{
    $("#returnViliMsg").attr("class", "tip1");
    if ($.trim($("#imageCode").val()) == "" || $.trim($("#imageCode").val()) == null) 
    {
        document.getElementById("returnViliMsg").innerHTML = "验证码不可以为空";
        $("#returnViliMsg").show();
        return false;
    } 
    else 
    {
        var flag = true;
        $.ajax({
            type : "POST",
            url : "checkVerifyMsg.ihtml?random=" + Math.random(),
            data : {
                "validation" : $.trim($("#imageCode").val())
            },
            async : false,
            dataType : "json",
            success : function(data) 
            {
                if (data == "0") 
                {
                    document.getElementById("returnViliMsg").innerHTML = "验证码错误";
                    $("#returnViliMsg").show();
                    flag = false;
                } 
                else 
                {
                    document.getElementById("returnViliMsg").innerHTML = "校验成功";
                    $("#returnViliMsg").attr("class", "tip-allowed");
                    $("#returnViliMsg").show();
                    return true;
                }
            }
        });
        return flag;
    }
}

function onAgreement() {
    if ($("#xieyi").attr("checked") != "checked") {
        document.getElementById("returnAgreeMsg").innerHTML = "您还未接受全棉时代用户注册协议";
        $("#returnAgreeMsg").show();
        return false;
    } else {
        $("#returnAgreeMsg").hide();
        return true;
    }
}

function onCodeCheck() {
    if ($.trim($("#code").val()) == "" || $.trim($("#code").val()) == null) {
        document.getElementById("codeError").innerHTML = "验证码不可以为空";
        $("#codeError").show();
        return false;
    } else {
        var flag = false;
        $.ajax({
            type : "POST",
            url : "checkIdentifyCode.ihtml?random=" + Math.random(),
            data : {
                "loginName" : $.trim($("#userName").val()),
                "code" : $.trim($("#code").val())
            },
            async : false,
            dataType : "json",
            success : function(data) {
                if (data == "1") {
                    document.getElementById("codeError").innerHTML = "验证通过";
                    $("#codeError").show();
                    flag = true;
                } else {
                    document.getElementById("codeError").innerHTML = "验证不通过";
                    $("#codeError").show();
                    flag = false;
                }
            }
        });
        return flag;
    }
}

//获取短信验证码,普通流程注册
function getCode() 
{
    // 手机号验证
    var vcode = checkmobile();
    var vimgcode = onMsgCheck();
    if (vcode && vimgcode) 
    {
        time1(document.getElementById("btn"), document.getElementById("telephone"));
        $("#btn").css("cursor", 'default');
        $.ajax({
            type : "POST",
            url : MallPath+"/mall/memberLogin/sendPhoneSMSCode.ihtml?random=" + Math.random(),
            data : {
                "telephone" : $.trim($("#telephone").val()),
                "purpose": 'Register',
                "imageCode": $.trim($("#imageCode").val())
            },
            async : true,
            dataType : "json",
            success : function(result)
            {
                if(result.success == true)
                {
                    document.getElementById("checktelephone").innerHTML = result.data;
                    $("#checktelephone").css("color","#008B8B").show();
                }
                else
                {
                    document.getElementById("checktelephone").innerHTML = result.data;
                    $("#checktelephone").css("color","red").show();
                }
                
            }
        });
    } 
    else 
    {
        alertBox("请输入有效手机号或验证码!");
    }
}

// 门店首次登陆获取手机验证码
function getCode1() 
{
    var vcode = validatemobile();
    var imgCode = onMsgCheck();
    if (vcode && imgCode) 
    {
        time1(document.getElementById("btn"), document.getElementById("telephone"));
        $("#btn").css("cursor", 'default');
        $.ajax({
            type : "POST",
            url : MallPath+"/mall/memberLogin/sendPhoneSMSCode.ihtml?random=" + Math.random(),
            data : {
                "telephone" : $.trim($("#telephone").val()),
                "purpose" : 'firstRegister',
                "imageCode": $.trim($("#imageCode").val())
            },
            async : true,
            dataType : "json",
            success : function(result)
            {
                if(result.success == true)
                {
                    document.getElementById("checktelephone").innerHTML = result.data;
                    $("#checktelephone").css("color","#008B8B").show();
                }
                else
                {
                    document.getElementById("checktelephone").innerHTML = result.data;
                    $("#checktelephone").css("color","red").show();
                }
                
            }
        });
    } 
    else 
    {
        alertBox("请输入有效手机号或图像验证码!");
    }
}

function submitEmail() {
    var sEmail = onEmailCheck();
    if (sEmail) {
        document.getElementById("sendMassage").submit();
    }

}

function onPwdCheck() {

    var password = $.trim($("#password").val());
    if (f_haveBank($("#password").val())) {
        document.getElementById("returnSPwdMessage").innerHTML = "密码不能包含空格组成";
        $("#returnSPwdMessage").show();
        return false;
    }
    var patrn = /^(\w){6,20}$/;
    if (!patrn.exec(password)) {
        document.getElementById("returnSPwdMessage").innerHTML = "密码必须为6-20个字母、数字、下划线组成";
        $("#returnSPwdMessage").show();
        return false;
    } else {
        $("#returnSPwdMessage").hide();
        return true;
    }
}

function f_haveBank(msg) {
    for ( var idx = 0; idx < msg.length; idx++) {
        if (msg.substr(idx, 1) == " ") {
            return true;
        }
    }
    return false;
}

function onPwd2CHeck() {
    if ($.trim($("#re_password").val()) == "" || $.trim($("#re_password").val()) == null) {
        document.getElementById("returnSPwd2Message").innerHTML = "确认密码不可以为空!";
        $("#returnSPwd2Message").show();
        return false;
    } else if ($.trim($("#password").val()) != $.trim($("#re_password").val())) {
        document.getElementById("returnSPwd2Message").innerHTML = "两次密码输入不一致";
        $("#returnSPwd2Message").show();
        return false;
    } else {
        $("#returnSPwd2Message").hide();
        return true;
    }
}

function onNameCheck() {
    $("#userNameError").attr("class", "tip1");
    var re = /^[a-zA-Z][a-zA-Z0-9_]{5,16}$/;
    if ($.trim($("#userName").val()) == null || "" == $.trim($("#userName").val())) {
        document.getElementById("userNameError").innerHTML = "用户名不能为空";
        $("#userNameError").show();
        return false;
    } else if (!re.exec($.trim($("#userName").val()))) {
        document.getElementById("userNameError").innerHTML = "6~16个字符，可使用字母.数字.下划线，需以字母开头";
        $("#userNameError").show();
        return false;
    } else {
        var flag = false;
        $.ajax({
            type : "POST",
            url : "checkLoginName.ihtml?random=" + Math.random(),
            data : {
                "loginName" : $.trim($("#userName").val())
            },
            async : false,
            dataType : "json",
            success : function(data) {
                if (data == "1") {
                    document.getElementById("userNameError").innerHTML = "该用户名已被占用，请重新输入";
                    $("#userNameError").show();
                    flag = false;
                } else {
                    debugger;
                    document.getElementById("userNameError").innerHTML = "该用户名可以使用";
                    //document.getElementById("userNameError").innerHTML = "<font style='color:green;'>该用户名可以使用</font>";
                    //$("#userNameError").css("color","green");
                    $("#userNameError").attr("class", "tip-allowed");
                    $("#userNameError").show();
                    flag = true;
                }
            }
        });
        return flag;
    }
}

function onEmailCheck() {
    $("#returnSEmailMessage").attr("class", "tip1");
    if ($.trim($("#emailS").val()) == null || $.trim($("#emailS").val()) == "") {
        document.getElementById("returnSEmailMessage").innerHTML = "邮箱号为空";
        $("#returnSEmailMessage").show();
        return false;
    } else if (isEmail($.trim($("#emailS").val()), 'returnSEmailMessage') == true) {
        document.getElementById("returnSEmailMessage").innerHTML = "邮箱号码格式错误";
        $("#returnSEmailMessage").show();
        return false;
    } else {
        var flag = false;
        $.ajax({
            type : "POST",
            url : "checkEmail.ihtml?random=" + Math.random(),
            data : {
                "email" : $.trim($("#emailS").val())
            },
            async : false,
            dataType : "json",
            success : function(data) {
                if (data == "1") {
                    document.getElementById("returnSEmailMessage").innerHTML = "该邮箱已被绑定，请使用其它邮箱账号";
                    $("#returnSEmailMessage").show();
                    flag = false;
                } else {
                    document.getElementById("returnSEmailMessage").innerHTML = "该邮箱可以使用";
                    //$("#returnSEmailMessage").css("color","green");
                    $("#returnSEmailMessage").attr("class", "tip-allowed");
                    $("#returnSEmailMessage").show();
                    flag = true;
                }
            }
        });
        return flag;
    }
}
function isEmail(strEmail, returnmessage) {
    var myreg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
    if (!myreg.test(strEmail)) {
        return true;
    } else {
        return false;
    }
}

function strlen(str) {
    var len = 0;
    for ( var i = 0; i < str.length; i++) {
        var c = str.charCodeAt(i);
        // 单字节加1
        if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {
            len++;
        } else {
            len += 2;
        }
    }
    return len;
}
function pwdLevel(value) {
    var pattern_1 = /^.*([\W_])+.*$/i;
    var pattern_2 = /^.*([a-zA-Z])+.*$/i;
    var pattern_3 = /^.*([0-9])+.*$/i;
    var level = 0;
    if (value.length > 10) {
        level++;
    }
    if (pattern_1.test(value)) {
        level++;
    }
    if (pattern_2.test(value)) {
        level++;
    }
    if (pattern_3.test(value)) {
        level++;
    }
    if (level > 3) {
        level = 3;
    }
    return level;
}
// 当用户放开键盘或密码输入框失去焦点时,根据不同的级别显示不同的颜色
function pwStrength(pwd) {
    if (pwd == null || pwd == '') {
        $("#lowPwd").show();
        $("#inPwd").hide();
        $("#hightPwd").hide();
    } else {
        S_level = pwdLevel(pwd);
        switch (S_level) {
            case 1:
                $("#lowPwd").show();
                $("#inPwd").hide();
                $("#hightPwd").hide();
                break;
            case 2:
                $("#lowPwd").hide();
                $("#inPwd").show();
                $("#hightPwd").hide();
                break;
            case 3:
                $("#lowPwd").hide();
                $("#inPwd").hide();
                $("#hightPwd").show();
                break;
            default:
                $("#lowPwd").show();
                $("#inPwd").hide();
                $("#hightPwd").hide();
        }
    }
    return;
}
/*
 * function ShowDialog(url) { var iWidth=600; //窗口宽度 var iHeight=400;//窗口高度 var
 * iTop=(window.screen.height-iHeight)/2; var
 * iLeft=(window.screen.width-iWidth)/2;
 * window.open(url,"Detail","Scrollbars=yes,Toolbar=no,Location=no,Direction=no,Resizeable=no,Width="+iWidth+"
 * ,Height="+iHeight+",top="+iTop+",left="+iLeft); }
 */

document.onkeydown = function(e) {
    var ev = e || window.event;
    if (ev.keyCode == 13)
		if(document.getElementById("submitShop_show") != null)
		{
			registerShop();
		}else
		{
			gotoRegisterForNewPC();
		}
        
};

// 在官网校验手机号是否绑定注册,用于门店会员首次登陆
function validatemobile() 
{
    $("#identifyCode").attr("class", "tip1");
    var mobile = $("#telephone").val();
    var myreg = /^0?(13|15|17|18|14)[0-9]{9}$/;
    if (mobile.length == 0) 
    {
        document.getElementById("identifyCode").innerHTML = "手机号码不能为空";
        $("#identifyCode").show();
        return false;
    } 
    else if (mobile.length != 11) 
    {
        document.getElementById("identifyCode").innerHTML = "请输入11位有效的手机号码";
        $("#identifyCode").show();
        return false;
    } 
    else if (!myreg.test(mobile)) 
    {
        document.getElementById("identifyCode").innerHTML = "请输入有效手机号";
        $("#identifyCode").show();
        return false;
    } 
    else 
    {
        var flag = false;
        $.ajax({
            type : "POST",
            url : "checkTelephone.ihtml?",
            data : {
                "mobile" : $.trim($("#telephone").val())
            },
            async : false,
            dataType : "json",
            success : function(data) {
                if (data == "1") 
                {
                    document.getElementById("identifyCode").innerHTML = "您好，该手机号已注册官网用户，请<a href='toLogin.ihtml'>点击此处</a>登录！";
                    $("#identifyCode").show();
                    flag = false;
                } 
                else 
                {
                    document.getElementById("identifyCode").innerHTML = "该手机号可以使用";
                    $("#identifyCode").attr("class", "tip-allowed");
                    $("#identifyCode").show();
                    flag = true;
                }
            }
        });
        return flag;
    }
}

// 短信验证码校验
function onTelCode() 
{
    $("#checktelephone").attr("class", "tip1");
    if ($.trim($("#validateCode").val()) == "" || $.trim($("#validateCode").val()) == null) 
    {
        document.getElementById("checktelephone").innerHTML = "手机验证码不能为空";
        $("#checktelephone").show();
        return false;
    } 
    else 
    {
        var flag = true;
        $.ajax({
            type : "POST",
            url : "checkIdentifyCode.ihtml",
            data : {
                "loginName": $.trim($("#telephone").val()),
                "code" : $.trim($("#validateCode").val())
            },
            async : false,
            dataType : "json",
            success : function(data) 
            {
                if (data == "0") 
                {
                    document.getElementById("checktelephone").innerHTML = "手机验证码错误";
                    $("#checktelephone").show();
                    flag = false;
                } 
                else 
                {
                    document.getElementById("checktelephone").innerHTML = "手机验证码正确";
                    $("#checktelephone").attr("class", "tip-allowed");
                    return true;
                }
            }
        });
        return flag;
    }
}

// 去siebel校验手机号是否注册，用于正常流程注册
function checkmobile() 
{
    $("#identifyCode").attr("class", "tip1");
    var mobile = $("#telephone").val();
    var myreg = /^0?(13|15|17|18|14)[0-9]{9}$/;
    if (mobile.length == 0) 
    {
        document.getElementById("identifyCode").innerHTML = "手机号码不能为空";
        $("#identifyCode").show();
        return false;
    } 
    else if (mobile.length != 11) 
    {
        document.getElementById("identifyCode").innerHTML = "请输入11位有效的手机号码";
        $("#identifyCode").show();
        return false;
    } 
    else if (!myreg.test(mobile)) 
    {
        document.getElementById("identifyCode").innerHTML = "请输入有效手机号";
        $("#identifyCode").show();
        return false;
    } 
    else 
    {
        var flag = false;
        $.ajax({
            type : "POST",
            url : "checkTelephone.ihtml?",
            data : {
                "mobile" : $.trim($("#telephone").val())
            },
            async : false,
            dataType : "json",
            success : function(data) 
            {
                if (data == "1") 
                {
                    document.getElementById("identifyCode").innerHTML = 
                    	"您好，该手机号已注册官网用户，请直接用该手机号登录！";
                    $("#identifyCode").show();
                    flag = false;
                }  
                else 
                {
                    document.getElementById("identifyCode").innerHTML = "该手机号可以使用";
                    $("#identifyCode").attr("class", "tip-allowed");
                    $("#identifyCode").show();
                    flag = true;
                }
            }
        });
        return flag;
    }
}

// -------------------  PC改版使用Begin  --------------------------
//注册提交
function gotoRegisterForNewPC()
{
	var mobile = $("#telephone").val();
    if (mobile.length == 0)
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("手机号码不能为空");
        return false;
    }
    
    var password = $("#password").val();
    if (password.length == 0)
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("密码不能为空");
        return false;
    }
    
    var rePassword = $("#re_password").val();
    if (rePassword.length == 0) 
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("确认密码不可以为空!");
        return false;
    }
    
    var imageCode = $("#imageCode").val();
    if (imageCode.length == 0) 
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("图形验证码不可以为空!");
        return false;
    }
    
    var validateCode = $("#validateCode").val();
    if (validateCode.length == 0) 
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("短信验证码不可以为空!");
        return false;
    }
	
	var sTel = checkmobileForNewPC();
    // var stelcode = onTelCodeForNewPC();
    var vimgcode = onMsgCheckForNewPC();
    var stelcode = onTelCodeForNewPC();

    //pingyou注册统计
    var _orderno = document.getElementById("telephone").value;
    juxiaoTongji(_orderno);

    if (sTel == true && vimgcode == true && stelcode == true ) 
    {
    	document.getElementById("submitBtn").innerHTML = "<span class='button9'><b>提交中...</b></span>";
        document.getElementById("register").submit();
        return true;
    }
}

//去siebel校验手机号是否注册，用于正常流程注册
function checkmobileForNewPC()
{
    var mobile = $("#telephone").val();
    var myreg = /^0?(13|15|17|18|14)[0-9]{9}$/;
    if (mobile.length == 0)
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("手机号码不能为空");
        return false;
    } 
    else if (mobile.length != 11)
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("请输入11位有效的手机号码");
        return false;
    } 
    else if (!myreg.test(mobile))
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("请输入有效手机号");
        return false;
    } 
    else
    {
        var flag = false;
        $.ajax({
            type : "POST",
            url : "checkTelephone.ihtml?",
            data : {
                "mobile" : $.trim($("#telephone").val())
            },
            async : false,
            dataType : "json",
            success : function(data) 
            {
                if (data == "1") 
                {
                	if($("#warnMsgReg").hasClass("green"))
                	{
                		$("#warnMsgReg").removeClass("green").addClass("red");
                	}
                    $("#warnMsgReg").html("您好，该手机号已注册，请<a href='toLogin.ihtml'>点击此处</a>登录！");
                    flag = false;
                }  
                else 
                {
                	$("#warnMsgReg").removeClass("red").addClass("green");
                    $("#warnMsgReg").html("该手机号可以使用");
                    flag = true;
                }
            }
        });
        return flag;
    }
}

// 短信验证码校验
function onTelCodeForNewPC()
{
    if ($.trim($("#validateCode").val()) == "" || $.trim($("#validateCode").val()) == null) 
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("手机验证码不能为空");
        return false;
    } 
    else 
    {
        var flag = true;
        $.ajax({
            type : "POST",
            url : "checkIdentifyCode.ihtml",
            data : {
                "loginName": $.trim($("#telephone").val()),
                "code" : $.trim($("#validateCode").val())
            },
            async : false,
            dataType : "json",
            success : function(data) 
            {
                if (data == "0") 
                {
                	if($("#warnMsgReg").hasClass("green"))
                	{
                		$("#warnMsgReg").removeClass("green").addClass("red");
                	}
                    $("#warnMsgReg").html("手机验证码错误");
                    flag = false;
                } 
                else 
                {
                	$("#warnMsgReg").removeClass("red").addClass("green");
                    $("#warnMsgReg").html("手机验证码正确");
                    return true;
                }
            }
        });
        return flag;
    }
}

//图像验证码校验
function onMsgCheckForNewPC()
{
    if ($.trim($("#imageCode").val()) == "" || $.trim($("#imageCode").val()) == null)
    {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("验证码不可以为空");
        return false;
    }
    else
    {
        var flag = true;
        $.ajax({
            type : "POST",
            url : "checkVerifyMsg.ihtml?random=" + Math.random(),
            data : {
                "validation" : $.trim($("#imageCode").val())
            },
            async : false,
            dataType : "json",
            success : function(data) 
            {
                if (data == "0") 
                {
                	if($("#warnMsgReg").hasClass("green"))
                	{
                		$("#warnMsgReg").removeClass("green").addClass("red");
                	}
                    $("#warnMsgReg").html("验证码错误");
                    flag = false;
                } 
                else 
                {
                	$("#warnMsgReg").removeClass("red").addClass("green");
                    $("#warnMsgReg").html("验证码校验成功");
                    return true;
                }
            }
        });
        return flag;
    }
}

function onPwdCheckForNewPC() {
    var password = $.trim($("#password").val());
    if (f_haveBank($("#password").val())) {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("密码不能包含空格组成");
        return false;
    }
    var patrn = /^(\w){8,20}$/;
    if (!patrn.exec(password)) {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("密码必须为8-20个字母、数字、下划线组成");
        return false;
    } else {
    	$("#warnMsg").html("");
        return true;
    }
}

function onPwd2CHeckForNewPC() {
    if ($.trim($("#re_password").val()) == "" || $.trim($("#re_password").val()) == null) {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("确认密码不可以为空!");
        return false;
    } else if ($.trim($("#password").val()) != $.trim($("#re_password").val())) {
    	if($("#warnMsgReg").hasClass("green"))
    	{
    		$("#warnMsgReg").removeClass("green").addClass("red");
    	}
        $("#warnMsgReg").html("两次密码输入不一致!");
        return false;
    } else {
    	$("#warnMsgReg").html("");
        return true;
    }
}

//获取短信验证码,普通流程注册
function getCodeForNewPC()
{
    // 手机号验证
    var vcode = checkmobileForNewPC();
    var vimgcode = onMsgCheckForNewPC();
    if (vcode && vimgcode)
    {
        timezy(document.getElementById("btn"), document.getElementById("telephone"));
        $("#btn").css("cursor", 'default');
        $.ajax({
            type : "POST",
            url : MallPath+"/mall/memberLogin/sendPhoneSMSCode.ihtml?random=" + Math.random(),
            data : {
                "telephone" : $.trim($("#telephone").val()),
                "purpose": 'Register',
                "imageCode": $.trim($("#imageCode").val())
            },
            async : true,
            dataType : "json",
            success : function(result)
            {
                if(result.success == true)
                {
                	$("#warnMsgReg").removeClass("red").addClass("green");
                    $("#warnMsgReg").html(result.data);
                }
                else
                {
                    $("#warnMsgReg").html(result.data);
                }
            }
        });
    }
    else
    {
        alert("请输入有效手机号或验证码!");
    }
}

//-------------------  PC改版使用End  --------------------------
